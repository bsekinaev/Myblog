{% load static %}
<!DOCTYPE html>
<html lang="ru" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}–ú–æ–π –ë–ª–æ–≥{% endblock %}</title>
    <link rel="stylesheet" href="/static/blog/main.css">
</head>
<body>
<header>
    <div class="container">
        <h1><a href="{% url 'blog-home' %}">–ú–æ–π –ë–ª–æ–≥</a></h1>
        <nav>
            <a href="{% url 'blog-home' %}">–ì–ª–∞–≤–Ω–∞—è</a>
            <a href="{% url 'post-create' %}">–ù–æ–≤—ã–π –ø–æ—Å—Ç</a>
            <form action="{% url 'search' %}" method="GET" class="search-form">
                <input type="text" name="q" placeholder="–ü–æ–∏—Å–∫...">
                <button type="submit">üîç</button>
            </form>

            <div class="auth-links">
                {% if user.is_authenticated %}
                <span>–ü—Ä–∏–≤–µ—Ç, {{ user.username }}!</span>
                <a href="{% url 'logout' %}">–í—ã–π—Ç–∏</a>
                {% else %}
                <a href="{% url 'login' %}">–í–æ–π—Ç–∏</a>
                <a href="{% url 'register' %}">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                {% endif %}
            </div>

            <button id="theme-toggle">üåô</button>
        </nav>
    </div>
</header>

<main class="container">
    {% block content %}{% endblock %}
</main>

<footer>
    <div class="container">
        <p>&copy; {% now "Y" %} –ú–æ–π –ë–ª–æ–≥</p>
    </div>
</footer>

<script>
    // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã
    const themeToggle = document.getElementById('theme-toggle');
    const html = document.documentElement;

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é —Ç–µ–º—É
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme) {
        html.setAttribute('data-theme', savedTheme);
        themeToggle.textContent = savedTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
    }

    themeToggle.addEventListener('click', () => {
        const currentTheme = html.getAttribute('data-theme');
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';

        html.setAttribute('data-theme', newTheme);
        themeToggle.textContent = newTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
        localStorage.setItem('theme', newTheme);
    });
</script>
</body>
</html>